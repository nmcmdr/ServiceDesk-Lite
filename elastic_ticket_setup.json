{
  "steps": [
    {
      "description": "1.",
      "method": "PUT",
      "path": "_index_template/ticket_template",
      "body": {
        "index_patterns": ["tickets-*"],
        "template": {
          "settings": {
            "number_of_shards": 1,
            "number_of_replicas": 1,
            "analysis": {
              "analyzer": {
                "custom_lowercase_analyzer": {
                  "type": "custom",
                  "tokenizer": "standard",
                  "filter": ["lowercase"]
                }
              }
            },
            "index.lifecycle.name": "ticket_ilm_policy",
            "index.lifecycle.rollover_alias": "tickets-active"
          },
          "mappings": {
            "dynamic_templates": [
              {
                "short_strings_as_keyword": {
                  "match_mapping_type": "string",
                  "path_match":   "*_short",
                  "mapping": {
                    "type": "keyword"
                  }
                }
              },
              {
                "long_strings_as_text": {
                  "match_mapping_type": "string",
                  "mapping": {
                    "type": "text",
                    "analyzer": "custom_lowercase_analyzer"
                  }
                }
              }
            ],
            "properties": {
              "id": { "type": "integer" },
              "title": { "type": "text", "analyzer": "custom_lowercase_analyzer" },
              "description": { "type": "text", "analyzer": "custom_lowercase_analyzer" },
              "status": { "type": "keyword" },
              "author": { "type": "keyword" },
              "created_at": { "type": "date" },
              "updated_at": { "type": "date" }
            }
          }
        }
      }
    },
    {
      "description": "2.",
      "method": "PUT",
      "path": "_ilm/policy/ticket_ilm_policy",
      "body": {
        "policy": {
          "phases": {
            "hot": {
              "min_age": "0ms",
              "actions": {
                "rollover": {
                  "max_size": "50gb",
                  "max_age": "30d",
                  "max_docs": 10000000
                },
                "set_priority": {
                  "priority": 100
                }
              }
            },
            "delete": {
              "min_age": "180d",
              "actions": {
                "delete": {}
              }
            }
          }
        }
      }
    },
    {
      "description": "3.",
      "method": "PUT",
      "path": "tickets-2025.10-000001",
      "body": {
        "aliases": {
          "tickets-active": {
            "is_write_index": true
          }
        }
      }
    },
    {
      "description": "4.",
      "method": "POST",
      "path": "tickets-active/_doc",
      "body": {
        "id": 1,
        "title": "Network issue in office A",
        "description": "The internet connection is very slow",
        "status": "new",
        "author": "user1",
        "created_at": "2025-10-21T10:00:00Z",
        "updated_at": "2025-10-21T10:00:00Z"
      }
    },
    {
      "description": "5.",
      "method": "POST",
      "path": "tickets-active/_rollover",
      "body": {
        "conditions": {
          "max_age": "1d"
        }
      }
    }
  ]
}